<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Inbox</title>

    <script type="text/javascript">
        var clevertap = { event: [], profile: [], account: [], onUserLogin: [], notifications: [], privacy: [] };

        clevertap.account.push({ "id": "886-85W-7Z7Z" });
        clevertap.privacy.push({ optOut: false });
        clevertap.privacy.push({ useIP: true });

        (function () {
            var wzrk = document.createElement('script');
            wzrk.type = 'text/javascript';
            wzrk.async = true;
            wzrk.src = ('https:' == document.location.protocol ?
                'https://d2r1yp2w7bby2u.cloudfront.net' :
                'http://static.clevertap.com') + '/js/clevertap.min.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(wzrk, s);
        })();
    </script>

    <script>
        clevertap.event.push('Page Viewed', {
            "Page Name": document.title,
            "Page URL": window.location.href
        });

        function updateNotificationPanel() {
            const messages = clevertap.getAllInboxMessages();
            const notificationList = document.getElementById("notificationList");
            notificationList.innerHTML = "";

            let messageCount = 0;
            Object.keys(messages).forEach(key => {
                const message = messages[key];
                message.msg.forEach(msgItem => {
                    if (messageCount < 5) {
                        const title = msgItem.title;
                        const description = msgItem.description;
                        if (title && description) {
                            const listItem = document.createElement("li");
                            listItem.innerHTML = `<strong>${title}</strong><br>${description}`;
                            notificationList.appendChild(listItem);
                            messageCount++;
                        }
                    }
                });
            });

            if (!notificationList.innerHTML) {
                notificationList.innerHTML = "No notifications available.";
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            const notificationBell = document.getElementById("notificationBell");
            const notificationPanel = document.getElementById("notificationPanel");

            notificationBell.addEventListener("click", function () {
                const isPanelVisible = notificationPanel.style.display === "block";
                notificationPanel.style.display = isPanelVisible ? "none" : "block";

                if (!isPanelVisible) {
                    updateNotificationPanel();
                }
            });

            document.addEventListener("click", function (event) {
                if (!notificationBell.contains(event.target) && !notificationPanel.contains(event.target)) {
                    notificationPanel.style.display = "none";
                }
            });

            const buttons = document.querySelectorAll('.button-container button');
            buttons.forEach(function (button) {
                button.addEventListener('click', function () {
                    changeImage(button, button.parentElement.parentElement.id);
                    button.classList.add("clicked");
                    setTimeout(() => button.classList.remove("clicked"), 500);
                });
            });
        });

        function changeImage(button, bannerId) {
            var img = document.querySelector(`#${bannerId} img`);
            var index = parseInt(bannerId.split("-")[2]) - 1;
            img.src = images[index];

            // Track button click event
            clevertap.event.push(button.textContent + ' Clicked', {
                "Banner Number": bannerId.split("-")[2]
            });

            // Request push notification permission
            clevertap.notifications.push({
                "titleText": "Would you like to receive Push Notifications?",
                "bodyText": "We promise to only send you relevant content and give you updates on your transactions",
                "okButtonText": "Sign me up!",
                "rejectButtonText": "No thanks",
                "okButtonColor": "#F28046",
                "hidePoweredByCT": true
            });

            button.classList.add('clicked');
            setTimeout(function () {
                button.classList.remove('clicked');
            }, 500);
        }

        var images = [
            "https://cdn.pixabay.com/photo/2018/08/14/13/23/ocean-3605547_640.jpg",
            "https://images.pexels.com/photos/326055/pexels-photo-326055.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",
            "https://cdn.pixabay.com/photo/2023/07/21/16/06/ai-generated-8141887_640.jpg"
        ];
    </script>

    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
        }

        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
        }

        .notification-bell {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            position: relative;
        }

        .notification-count {
            background: red;
            color: white;
            border-radius: 50%;
            font-size: 12px;
            padding: 2px 6px;
            position: absolute;
            top: -8px;
            right: -8px;
        }

        .notification-panel {
            display: none;
            position: absolute;
            top: 40px;
            right: 0;
            width: 300px;
            background: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 10px;
        }

        .notification-panel h3 {
            margin-top: 0;
            font-size: 18px;
        }

        .notification-panel ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .notification-panel li {
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
        }

        .notification-panel li:last-child {
            border-bottom: none;
        }

        .banner {
            width: 100%;
            overflow: hidden;
        }

        .big-banner {
            width: 80%;
            margin: 0 10%;
            height: 315px;
            border: 2px solid #ccc;
            border-radius: 10px;
            overflow: hidden;
        }

        .small-banners {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 10px;
        }

        .small-banner {
            position: relative;
            border: 2px solid #ccc;
            border-radius: 10px;
            overflow: hidden;
            height: 250px;
        }

        .small-banner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        .button-container {
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            background-color: #f0f0f0;
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        .button-container button {
            padding: 10px;
            border: 2px solid #333;
            border-radius: 5px;
            cursor: pointer;
            flex: 1;
            margin: 5px;
        }

        .button-container button.clicked {
            background-color: #8ed9d4;
        }

        h1 {
            text-align: center;
        }

        /* Hide CleverTap bell icons and branding */
        #bell_icon,
        img[id*="bell"],
        img[src*="bell"],
        img[src*="clevertap"],
        .ctBellIcon,
        [class*="bell-icon"],
        [id*="ct-web-personalization"] img,
        div[style*="background"] img[src*="data:image/svg"] {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            width: 0 !important;
            height: 0 !important;
        }
    </style>
</head>
<body>

    <div class="notification-container">
        <button class="notification-bell" id="notificationBell">
            ðŸ””
            <span class="notification-count">3</span>
        </button>
        <div class="notification-panel" id="notificationPanel">
            <h3>Notifications</h3>
            <ul id="notificationList"></ul>
        </div>
    </div>

    <h1>Web Inbox Display</h1>

    <div class="banner">
        <img class="big-banner" src="https://1.bp.blogspot.com/-kK7Fxm7U9o0/YN0bSIwSLvI/AAAAAAAACFk/aF4EI7XU_ashruTzTIpifBfNzb4thUivACLcBGAsYHQ/s1280/222.jpg" alt="Scenic Banner Image">
    </div>

    <div class="small-banners">
        <div class="small-banner" id="small-banner-1">
            <img src="https://cdn.pixabay.com/photo/2018/08/14/13/23/ocean-3605547_640.jpg" alt="Small Banner 1">
            <div class="button-container">
                <button>Banner</button>
                <button>Carousel</button>
                <button>Custom</button>
            </div>
        </div>

        <div class="small-banner" id="small-banner-2">
            <img src="https://images.pexels.com/photos/326055/pexels-photo-326055.jpeg" alt="Small Banner 2">
            <div class="button-container">
                <button>Banner</button>
                <button>Carousel</button>
                <button>Custom</button>
            </div>
        </div>

        <div class="small-banner" id="small-banner-3">
            <img src="https://cdn.pixabay.com/photo/2023/07/21/16/06/ai-generated-8141887_640.jpg" alt="Small Banner 3">
            <div class="button-container">
                <button>Banner</button>
                <button>Carousel</button>
                <button>Custom</button>
            </div>
        </div>
    </div>

</body>
</html>
